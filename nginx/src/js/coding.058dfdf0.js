(function(){"use strict";var t={1331:function(t,n,e){var o=e(9963),i=e(6252),s=e(3577);const a={class:"notificationArea"},l={class:"notifiLeft"},u={class:"notificationText"},r=(0,i._)("p",null,"閉じる",-1),c=[r],d={class:"codingArea"},h={class:"codingLeft"},p={class:"unitName"},f={class:"assist"},w={class:"assistInner"},b={class:"assistText"},m={class:"assistSample"},v={class:"assistSampleExplan"},x=(0,i._)("h2",null,"＜サンプルコード＞",-1),_={class:"assistSelect"},S=["disabled"],g=["disabled"],y={class:"codingRight"},T={class:"question"},I={class:"codingForm"},O={class:"codingFormInner"},N=(0,i._)("p",null,"＜ヘッダーコメント＞",-1),k=(0,i._)("p",null,"＜コーディングフォーム＞",-1),j={class:"codeRunButton"};function M(t,n,e,r,M,C){const D=(0,i.up)("Toggle"),R=(0,i.up)("codemirror"),V=(0,i.up)("CodeRun");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("div",a,[(0,i._)("div",l,[(0,i._)("p",u,(0,s.zw)(M.notificationText),1)]),(0,i._)("div",{class:"notifiRight",onClick:n[0]||(n[0]=t=>C.closeNotice())},c)],512),[[o.F8,M.notificationIsShow]]),(0,i._)("div",d,[(0,i._)("div",h,[(0,i._)("div",p,[(0,i._)("h1",null,(0,s.zw)(M.unitName),1)]),(0,i.Wm)(D,{modelValue:M.sampleIsShow,"onUpdate:modelValue":n[1]||(n[1]=t=>M.sampleIsShow=t),offLabel:"ヒント非表示",onLabel:"ヒント表示",class:"sampleToggle"},null,8,["modelValue"]),(0,i._)("div",f,[(0,i._)("div",w,[(0,i._)("div",b,[(0,i._)("h1",null,"STEP"+(0,s.zw)(M.viewStepNo),1),(0,i._)("h2",null,(0,s.zw)(M.assistObj[M.viewStepNo-1].title),1),(0,i._)("p",null,(0,s.zw)(M.assistObj[M.viewStepNo-1].body),1)]),(0,i._)("div",m,[(0,i.wy)((0,i._)("div",null,[(0,i._)("div",v,[x,(0,i._)("p",null,(0,s.zw)(M.assistObj[M.viewStepNo-1].sampleExp),1)]),(0,i.Wm)(R,{modelValue:M.assistObj[M.viewStepNo-1].sample,"onUpdate:modelValue":n[2]||(n[2]=t=>M.assistObj[M.viewStepNo-1].sample=t),placeholder:"Code goes here...",style:{height:"auto","font-size":"14pt"},autofocus:!1,"indent-with-tab":!1,"tab-size":4,extensions:M.extensions,disabled:!0},null,8,["modelValue","extensions"])],512),[[o.F8,M.sampleIsShow]])]),(0,i._)("div",_,[(0,i._)("button",{class:"css-button-rounded--sand",onClick:n[3]||(n[3]=t=>C.backStep()),disabled:M.backIsDisabled}," 前へ ",8,S),(0,i._)("button",{class:"css-button-rounded--green",onClick:n[4]||(n[4]=t=>C.nextStep()),disabled:M.nextIsDisabled}," 次へ ",8,g)])])])]),(0,i._)("div",y,[(0,i._)("div",T,[(0,i._)("h2",null,(0,s.zw)(M.questionTitle),1),(0,i._)("p",null,(0,s.zw)(M.questionDescription),1)]),(0,i._)("div",I,[(0,i._)("div",O,[N,(0,i.Wm)(R,{modelValue:M.headerText,"onUpdate:modelValue":n[5]||(n[5]=t=>M.headerText=t),placeholder:"コメントを書く",style:{height:"auto","font-size":"16pt"},autofocus:!1,"indent-with-tab":!1,"tab-size":4,extensions:M.extensions,onFocus:n[6]||(n[6]=t=>C.setNotice(0,0)),onBlur:n[7]||(n[7]=t=>C.closeNotice())},null,8,["modelValue","extensions"]),k,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.OutMainCnt,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.Wm)(R,{modelValue:M.outMainTextArray[t-1],"onUpdate:modelValue":n=>M.outMainTextArray[t-1]=n,placeholder:"コードを書く",style:{height:"auto","font-size":"16pt"},autofocus:!1,"indent-with-tab":!1,"tab-size":4,extensions:M.extensions,onFocus:n=>C.setNotice(0,t),onBlur:n[8]||(n[8]=t=>C.closeNotice())},null,8,["modelValue","onUpdate:modelValue","extensions","onFocus"])])))),128)),(0,i.wy)((0,i._)("pre",null,"  int main(void){\n          ",512),[[o.F8,M.mainIsShow]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.InMainCnt,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.Wm)(R,{modelValue:M.inMainTextArray[t-1],"onUpdate:modelValue":n=>M.inMainTextArray[t-1]=n,placeholder:"コードを書く",style:{width:"95%",height:"auto","font-size":"16pt",margin:"0 auto"},autofocus:!1,"indent-with-tab":!1,"tab-size":4,extensions:M.extensions,onFocus:n=>C.setNotice(1,t),onBlur:n[9]||(n[9]=t=>C.closeNotice())},null,8,["modelValue","onUpdate:modelValue","extensions","onFocus"])])))),128)),(0,i.wy)((0,i._)("pre",null,"    return 0;\n  }\n          ",512),[[o.F8,M.mainIsShow]])])]),(0,i._)("div",j,[(0,i._)("button",{class:"css-button-rounded--green",onClick:n[10]||(n[10]=t=>C.codeRun())}," 連結して実行 ")])]),(0,i.Wm)(V,{ref:"codeRunner"},null,512)])])}e(1703);var C=e(3685),D=e(4466),R=e(3732),V=e(4456),U=e(5383),z=e(6843);const A={class:"downloadModalArea"},E={class:"downloadModal"},F={class:"downloadModalInner"},q={class:"modalUpperArea"},L=(0,i._)("h1",null,"プログラムのダウンロード",-1),W=(0,i.Uk)(" 問題名（番号）："),B=(0,i._)("br",null,null,-1),P=(0,i.Uk)(" 学籍番号 ："),Z=(0,i._)("br",null,null,-1),$={class:"modalButtonArea"},H={class:"runArea"},K={class:"runAreaLeft"},Y=(0,i._)("h1",null,"プログラムの実行",-1),G=(0,i._)("p",null,[(0,i.Uk)(" 連結したプログラムは下記の通りです。確認したら「実行」をクリックしてください。"),(0,i._)("br"),(0,i.Uk)(" 入力がある場合は、「入力」テキストエリアに入力し、実行してください。 ")],-1),J={class:"source"},Q=(0,i._)("p",null,"＜連結したプログラム＞",-1),X={class:"runAreaRight"},tt={class:"inputOutput"},nt=(0,i._)("p",null,"＜入力＞",-1),et=(0,i._)("br",null,null,-1),ot=(0,i._)("p",null,"＜実行結果＞",-1),it={class:"buttonArea"};function st(t,n,e,a,l,u){const r=(0,i.up)("codemirror");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("div",A,[(0,i._)("div",E,[(0,i._)("div",F,[(0,i._)("div",q,[L,W,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>l.question=t)},null,512),[[o.nr,l.question]]),B,P,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=t=>l.studentId=t)},null,512),[[o.nr,l.studentId]]),Z]),(0,i._)("div",$,[(0,i._)("button",{class:"css-button-rounded--sand",onClick:n[2]||(n[2]=t=>u.closeDownloadModal())}," 戻る "),(0,i._)("button",{class:"css-button-rounded--green",onClick:n[3]||(n[3]=t=>u.download())}," ダウンロード ")])])])],512),[[o.F8,l.downloadModalIsShow]]),(0,i.wy)((0,i._)("div",H,[(0,i._)("div",K,[Y,G,(0,i._)("div",J,[Q,(0,i.Wm)(r,{modelValue:l.code,"onUpdate:modelValue":n[4]||(n[4]=t=>l.code=t),style:(0,s.j5)(l.codemirrorStyle),autofocus:!1,"indent-with-tab":!0,"tab-size":4,extensions:l.extensions,disabled:!0},null,8,["modelValue","style","extensions"])])]),(0,i._)("div",X,[(0,i._)("div",tt,[nt,(0,i.wy)((0,i._)("textarea",{cols:"40",rows:"5","onUpdate:modelValue":n[5]||(n[5]=t=>l.input=t)}," ",512),[[o.nr,l.input]]),et,(0,i._)("button",{class:"css-button-rounded--green",onClick:n[6]||(n[6]=(...t)=>u.run&&u.run(...t))},"実行！"),ot,(0,i._)("p",{style:(0,s.j5)(l.runResultStyle)},(0,s.zw)(l.runResultTxt),5),(0,i.wy)((0,i._)("textarea",{cols:"40",rows:"5","onUpdate:modelValue":n[7]||(n[7]=t=>l.outputErrTxt=t),disabled:""},null,512),[[o.nr,l.outputErrTxt]])]),(0,i._)("div",it,[(0,i._)("button",{class:"css-button-rounded--sand",onClick:n[8]||(n[8]=t=>u.backForm())}," フォームに戻る "),(0,i._)("button",{class:"css-button-rounded--green",onClick:n[9]||(n[9]=t=>u.openDownloadModal())}," ダウンロード ")])])],512),[[o.F8,l.thisIsShow]])])}var at={name:"CodeRun",components:{Codemirror:C.Z1},data(){return{thisIsShow:!1,downloadModalIsShow:!1,extensions:[(0,D.N)(),R.vk,V.$f.of([U.oc])],code:"",input:"",outputErrTxt:"",runResultTxt:"まだ実行していません。",question:"",studentId:"",codemirrorStyle:{width:"80%",height:"500px","font-size":"14pt",overflow:scroll},runResultStyle:{width:"200px",color:"#ffffff",background:"#3486eb"}}},methods:{insertCode:function(t){this.code="",this.code=t,this.thisIsShow=!0},run:async function(){if(""==this.code)return void alert("コードを入力してから押してください！");let t,n;""==this.input&&(n="input"),t={code:this.code,stdin:n,options:"warning,gnu++1y",compiler:"gcc-head","compiler-option-raw":"-Dx=hogefuga\n-O3"};const e="/api/execcode";let o;try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok){const t=await n.json();""!=t.program_output?(this.outputErrTxt=t.program_output,this.runResultTxt="実行成功",this.runResultStyle.background="#42cf1f"):""!=t.compiler_message&&(this.outputErrTxt=t.compiler_message,this.runResultTxt="エラー",this.runResultStyle.background="#ed1111"),console.log(t)}else switch(n.status){default:throw o="何らかの理由でエラーが発生しました。",new Error(o)}}catch(o){alert(o)}},openDownloadModal:function(){this.downloadModalIsShow=!0},closeDownloadModal:function(){this.downloadModalIsShow=!1},download:async function(){if(""==this.code)return void alert("コードがありません。");if(""==this.question||""==this.studentId)return void alert("問題名または学籍番号が入力されていません。");const t=this.code,n=this.question,e=this.studentId,o=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(o),s=document.createElement("a");document.body.appendChild(s);let a=n+"_"+e+".c";s.download=a,s.href=i,s.click(),s.remove(),URL.revokeObjectURL(i),this.closeDownloadModal()},backForm:function(){this.thisIsShow=!1,this.input="",this.outputErrTxt="",this.runResultTxt="まだ実行していません。",this.runResultStyle.background="#3486eb"}}},lt=e(3744);const ut=(0,lt.Z)(at,[["render",st]]);var rt=ut,ct={name:"CodingForm",components:{Codemirror:C.Z1,Toggle:z.Z,CodeRun:rt},data(){return{unitName:"",questionTitle:"",questionDescription:"",viewStepNo:1,nowStepNo:1,OutMainCnt:0,InMainCnt:0,mainIsShow:!1,backIsDisabled:!0,nextIsDisabled:!1,sampleIsShow:!0,notificationIsShow:!1,headerText:"",outMainTextArray:[],inMainTextArray:[],notificationText:"",extensions:[(0,D.N)(),R.vk,V.$f.of([U.oc])],assistObj:null}},created:async function(){const t=new URL(window.location.href),n=t.searchParams,e=n.get("formName"),o="./data/form/"+e+".json";let i;try{const t=await fetch(o,{method:"GET"});if(t.ok){const n=await t.json();this.unitName=n.formTitle,this.questionTitle=n.questionTitle,this.questionDescription=n.questionDescription,this.assistObj=n.assistObj,null==this.assistObj&&alert("フォームデータがありません。")}else switch(t.status){default:throw i="何らかの理由でエラーが発生しました。（E: "+t.status+")",new Error(i)}}catch(i){alert(i)}},methods:{changeDisabled:function(){1==this.viewStepNo?this.backIsDisabled=!0:this.backIsDisabled=!1,this.viewStepNo==this.assistObj.length?this.nextIsDisabled=!0:this.nextIsDisabled=!1},backStep:function(){this.viewStepNo--,this.changeDisabled()},nextStep:function(){if(this.viewStepNo<this.nowStepNo)return this.viewStepNo++,void this.changeDisabled();0==this.assistObj[this.nowStepNo].type?(this.nowStepNo++,this.viewStepNo++,this.OutMainCnt++):-1==this.assistObj[this.nowStepNo].type?(this.nowStepNo++,this.viewStepNo++,this.OutMainCnt--,this.mainIsShow=!0,this.InMainCnt++):1==this.assistObj[this.nowStepNo].type&&(this.nowStepNo++,this.viewStepNo++,this.InMainCnt++),this.changeDisabled()},codeRun:function(){if(0==this.mainIsShow)return void alert("連結と実行するには、main関数を定義する必要があります。");let t="";const n=this.connectOutMain();t=t+this.headerText+"\n"+n,t+="int main(void) {\n";const e=this.connectInMain();t+=e,t+="    return 0;\n}\n",this.$refs.codeRunner.insertCode(t)},connectOutMain:function(){let t="";const n=this.outMainTextArray.length;for(let e=0;e<n-1;e++)t=t+this.outMainTextArray[e]+"\n";return t+="\n",t},connectInMain:function(){let t="";const n=this.inMainTextArray.length;for(let e=0;e<n;e++)t+=this.insertTab(this.inMainTextArray[e].split("\n"));return t},insertTab:function(t){let n="";const e=t.length;for(let o=0;o<e;o++)n=n+"    "+t[o]+"\n";return n},notice:function(){this.notificationText="ここに通知が入ります。",this.notificationIsShow=!0},closeNotice:function(){this.notificationText="",this.notificationIsShow=!1},setNotice:function(t,n){if(1==this.notificationIsShow&&(this.notificationIsShow=!1,this.notificationText=""),0==t&&0==this.mainIsShow&&0==n)return this.notificationText=this.assistObj[n].notice,void(this.notificationIsShow=!0);if(0==t&&0==this.mainIsShow&&2==n){let t=0;this.assistObj.forEach((n=>{if(-1==n.type)return console.log("場所："+t),this.notificationText=this.assistObj[t-1].notice,void(this.notificationIsShow=!0);t++}))}if(0==t)return this.notificationText=this.assistObj[n].notice,void(this.notificationIsShow=!0);let e=0;this.assistObj.forEach((t=>{if(-1==t.type)return this.notificationText=this.assistObj[e+n-1].notice,void(this.notificationIsShow=!0);e++}))}}};const dt=(0,lt.Z)(ct,[["render",M]]);var ht=dt;(0,o.ri)(ht).mount("#app")}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var s=n[o]={exports:{}};return t[o](s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(n,o,i,s){if(!o){var a=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],s=t[c][2];for(var l=!0,u=0;u<o.length;u++)(!1&s||a>=s)&&Object.keys(e.O).every((function(t){return e.O[t](o[u])}))?o.splice(u--,1):(l=!1,s<a&&(a=s));if(l){t.splice(c--,1);var r=i();void 0!==r&&(n=r)}}return n}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[o,i,s]}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.j=607}(),function(){var t={607:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var i,s,a=o[0],l=o[1],u=o[2],r=0;if(a.some((function(n){return 0!==t[n]}))){for(i in l)e.o(l,i)&&(e.m[i]=l[i]);if(u)var c=u(e)}for(n&&n(o);r<a.length;r++)s=a[r],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(c)},o=self["webpackChunksystem"]=self["webpackChunksystem"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(1331)}));o=e.O(o)})();
//# sourceMappingURL=coding.058dfdf0.js.map